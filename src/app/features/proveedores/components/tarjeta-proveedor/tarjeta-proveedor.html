<div
  class="bg-white rounded-lg shadow-md hover:shadow-xl transition-all border-l-4 overflow-hidden"
  [class]="colorBorde()"
>
  <!-- Header -->
  <div class="p-5 border-b border-gray-100">
    <div class="flex items-start justify-between mb-3">
      <h3 class="text-lg font-bold text-gray-900 flex-1">
        {{ proveedor().nombre }}
      </h3>
      @if (tieneDeuda()) {
      <span class="text-2xl" title="Tiene deuda pendiente">‚ö†Ô∏è</span>
      } @else {
      <span class="text-2xl" title="Al d√≠a">‚úÖ</span>
      }
    </div>

    @if (proveedor().empresa) {
    <p class="text-sm text-gray-600 mb-2">üè¢ {{ proveedor().empresa }}</p>
    }

    <!-- ‚úÖ NUEVO: Mostrar categor√≠as -->
    @if (proveedor().categorias && proveedor().categorias.length > 0) {
    <div class="flex flex-wrap gap-2 mt-3">
      @for (categoria of proveedor().categorias; track categoria) {
      <span
        [class]="'px-2 py-1 rounded-full text-xs font-semibold ' + coloresCategorias[categoria]"
      >
        {{ etiquetasCategorias[categoria] }}
      </span>
      }
    </div>
    } @if (proveedor().contacto) {
    <p class="text-sm text-gray-600 mb-1 mt-3">
      <span class="font-medium">üë§ Contacto:</span>
      {{ proveedor().contacto }}
    </p>
    } @if (proveedor().telefono) {
    <p class="text-sm text-gray-600 mb-1">
      <span class="font-medium">üìû</span>
      {{ proveedor().telefono }}
    </p>
    } @if (proveedor().nit) {
    <p class="text-sm text-gray-600">
      <span class="font-medium">üÜî NIT:</span>
      {{ proveedor().nit }}
    </p>
    }
  </div>

  <!-- M√©tricas -->
  <div class="p-5 bg-gray-50">
    <div class="grid grid-cols-2 gap-4 mb-4">
      <!-- Saldo Pendiente -->
      <div class="text-center">
        <p class="text-xs text-gray-600 mb-1">Saldo Pendiente</p>
        @if (tieneDeuda()) {
        <p class="text-xl font-bold text-red-600">
          ${{ proveedor().saldoPendiente.toLocaleString('es-MX') }}
        </p>
        } @else {
        <p class="text-xl font-bold text-green-600">$0</p>
        }
      </div>

      <!-- Productos Cargados -->
      <div class="text-center">
        <p class="text-xs text-gray-600 mb-1">Productos</p>
        <p class="text-xl font-bold text-blue-600">
          {{ proveedor().productosCargados }}
        </p>
      </div>
    </div>

    <!-- T√©rmino de Pago -->
    <div class="text-center mb-3">
      <p class="text-xs text-gray-600 mb-1">T√©rmino de Pago</p>
      <p class="text-sm font-semibold text-gray-800">
        {{ proveedor().terminoPago }} d√≠as
      </p>
    </div>

    @if (proveedor().fechaUltimoAbono) {
    <div class="text-center">
      <p class="text-xs text-gray-600 mb-1">√öltimo Abono</p>
      <p class="text-sm text-gray-700">
        {{ proveedor().fechaUltimoAbono | date: 'dd/MM/yyyy' }}
      </p>
    </div>
    }
  </div>

  <!-- Acciones -->
  <div class="p-4 bg-white border-t border-gray-100">
    <!-- ‚úÖ MODIFICAR: Agregar bot√≥n "Ver Detalle" -->
    <div class="flex flex-col gap-2">
      <button
        (click)="verDetalle()"
        class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-2 rounded-lg transition-colors flex items-center justify-center gap-2"
      >
        <span>üëÅÔ∏è</span>
        <span>Ver Detalle</span>
      </button>
      <div class="flex gap-2">
        <button
          (click)="editar()"
          class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition-colors flex items-center justify-center gap-2"
        >
          <span>‚úèÔ∏è</span>
          <span>Editar</span>
        </button>
        <button
          (click)="eliminar()"
          class="bg-red-600 hover:bg-red-700 text-white font-semibold px-4 py-2 rounded-lg transition-colors"
          title="Eliminar"
        >
          üóëÔ∏è
        </button>
      </div>
    </div>
  </div>
</div>
